<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>JPost by janishar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">JPost</h1>
      <h2 class="project-tagline">Java class communication library</h2>
      <a href="https://github.com/janishar/JPost" class="btn">View on GitHub</a>
      <a href="https://github.com/janishar/JPost/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/janishar/JPost/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="jpost-java-class-communication-library" class="anchor" href="#jpost-java-class-communication-library" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JPost (Java class communication library)</h1>

<p><a href="https://travis-ci.org/janishar/JPost"> <img src="https://travis-ci.org/janishar/JPost.svg?branch=master" alt="Build Status"> </a>
<a href="https://bintray.com/janishar/mindorks/jpost/_latestVersion"> <img src="https://api.bintray.com/packages/janishar/mindorks/jpost/images/download.svg" alt="Download"> </a>
<a href="https://opensource.org/licenses/Apache-2.0"><img src="https://badges.frapsoft.com/os/v1/open-source.svg?v=102" alt="Open Source Love"></a>
<a href="https://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="License"></a></p>

<h1>
<a id="intro" class="anchor" href="#intro" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Intro</h1>

<h3>
<a id="this-library-is-designed-for-the-communication-between-classes-in-java-by-sending-and-receiving-messages-messages-can-be-any-object" class="anchor" href="#this-library-is-designed-for-the-communication-between-classes-in-java-by-sending-and-receiving-messages-messages-can-be-any-object" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>This library is designed for the communication between classes in java by sending and receiving messages. Messages can be any object.</h3>

<p>The design of this library is such that the modularity of the code is enhanced and provide a controlled system for sending and receiving messages. One of the key advantages of this library is that the message handling can be done both synchronusly(if the sender thread is same as the receiver thread) or asynchronously as provided. All the subscribing classes are holded with weakreferences, hense the memory leak do not take place. The usecases in which this library's power can be understood is when compared to other pub/sub libraries. Situations in which many instances of a single class require to process messages based on the sender. Example: A class wants to send message to few of the instances of the same class. The schema diagram provided below will provide a better insight.</p>

<hr>

<h1>
<a id="library-design-overview" class="anchor" href="#library-design-overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Library Design Overview</h1>

<h3>
<a id="the-channels-through-which-communication-can-be-done-is-categorised-into-three-categories" class="anchor" href="#the-channels-through-which-communication-can-be-done-is-categorised-into-three-categories" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The channels through which communication can be done is categorised into three categories:</h3>

<ol>
<li>
<strong>Default Channel</strong>: This is the prebuilt channel and allows global communication. When subscribed to this channel, the class can send messages to all the subscribed classes with message type, on this channel.</li>
<li>
<strong>Public Channel</strong>: This channel is designed for filtered communication. Public channels are created and the subscribers of this channel can receive messages broadcasted to this channel. The messages can also be send to selected subscribes.</li>
<li>
<strong>Private Channel</strong>: This channel is designed to control the access to the channel. The private channels need to be created and stores the owner information. Only the owner can add new subscribers. The messages can be interchanged between any combination of the added subscribers.</li>
</ol>

<p>
</p>

<p align="center">
  <img src="https://janishar.github.io/images/jpost_viz.png" width="400">
  </p><h3 align="center">
<a id="communication-model" class="anchor" href="#communication-model" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Communication Model


</h3><p>
</p>

<p align="center">
  <img src="https://janishar.github.io/images/jpost_exe_viz.png" width="750">
  </p><h3 align="center">
<a id="execution-model" class="anchor" href="#execution-model" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Execution Model


</h3><p>
</p>

<hr>

<h2>
<a id="if-this-library-helps-you-in-anyway-show-your-love-heart-by-putting-a-star-on-this-project-v" class="anchor" href="#if-this-library-helps-you-in-anyway-show-your-love-heart-by-putting-a-star-on-this-project-v" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>If this library helps you in anyway, show your love <g-emoji alias="heart" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/2764.png">❤️</g-emoji> by putting a <g-emoji alias="star" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/2b50.png">⭐</g-emoji> on this project <g-emoji alias="v" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/270c.png">✌️</g-emoji>
</h2>

<h1>
<a id="gradle" class="anchor" href="#gradle" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Gradle</h1>

<div class="highlight highlight-source-java"><pre>dependencies {
    compile <span class="pl-s"><span class="pl-pds">'</span>com.mindorks:jpost:0.0.1<span class="pl-pds">'</span></span>
}</pre></div>

<h1>
<a id="library-classes-overview" class="anchor" href="#library-classes-overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Library Classes Overview</h1>

<h1>
<a id="jpost" class="anchor" href="#jpost" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JPost</h1>

<h3>
<a id="the-one-point-entry-for-this-library-is-the-class-jpost-it-contains-static-methods-to-access-broadcastcenter-class-and-core-functionality-related-to-the-library-management" class="anchor" href="#the-one-point-entry-for-this-library-is-the-class-jpost-it-contains-static-methods-to-access-broadcastcenter-class-and-core-functionality-related-to-the-library-management" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The one point entry for this library is the class JPost. It contains static methods to access BroadcastCenter class and core functionality related to the library management.</h3>

<h2>
<a id="methods" class="anchor" href="#methods" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Methods</h2>

<ol>
<li>
<strong>JPost.getBroadcastCenter()</strong>: This method is used to get the instance of BroadcastCenter class (BroadcastCenter is described below)</li>
<li>
<strong>JPost.shutdown()</strong>: This method closes the JPost for the async operations and removes all the pool threads. It should called when the program terminates or as required. This call let the message delivery already in process to continue.</li>
<li>
<strong>JPost.haltAndShutdown()</strong>: This method does the same operation as do the <strong>JPost.shutdown()</strong> but it also removes all the message delivery tasks.;</li>
</ol>

<hr>

<h1>
<a id="broadcastcenter" class="anchor" href="#broadcastcenter" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>BroadcastCenter</h1>

<h3>
<a id="this-class-proivdes-all-the-functionality-attached-with-this-library" class="anchor" href="#this-class-proivdes-all-the-functionality-attached-with-this-library" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>This class proivdes all the functionality attached with this library.</h3>

<h2>
<a id="methods-1" class="anchor" href="#methods-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Methods</h2>

<ol>
<li>
<strong>createPrivateChannel(T owner, Integer channelId)</strong>: Creates a private channel requiring a unique int channel id. The owner is assigned owner.hashCode() as subscriber id.</li>
<li>
<strong>createPrivateChannel(T owner, Integer channelId, Integer subscriberId)</strong>: Creates a private channel requiring a unique int channel id. The owner is given subscriberId as subscriber id.</li>
<li>
<strong>createPublicChannel(Integer channelId)</strong>: Creates a public channel requiring a unique int channel id.</li>
<li>
<strong>stopChannel(Integer channelId)</strong>: Stops the channel with channel id temporarily.</li>
<li>
<strong>reopenChannel(Integer channelId)</strong>: Reopen the channel which has been stopped but not terminated.</li>
<li>
<strong>terminateChannel(Integer channelId)</strong>: Completely removes the channel and can not be used later.</li>
<li>
<strong>getChannel(Integer channelId)</strong>: Return the channel with channel id else returns null.</li>
<li>
<strong>broadcast(T msg)</strong>: This method sends messages to all the subscribers of the default global channel.</li>
<li>
<strong>broadcastAsync(T msg)</strong>: This method sends messages asynchronously to all the subscribers of the default global channel. The thread calling this methods can process with remaining processing as usual.</li>
<li>
<strong>broadcast(Integer channelId, T msg, Integer... subscribers)</strong>: This method sends messages to the subscribers of the channel of a particular channel id. If subscribers is not provided then all the subscribers of this channel receiver the message.</li>
<li>
<strong>broadcastAsync(Integer channelId, T msg, Integer... subscribers)</strong>: Does the same as above(method 10) but asynchronously.</li>
<li>
<strong>broadcast(V registeredSubscriber, Integer channelId, T msg, Integer... subscribers)</strong>: This method is used to send message on a private channel. Only the registered subscribers can send and receive messges on private channel.</li>
<li>
<strong>broadcastAsync(V registeredSubscriber, Integer channelId, T msg, Integer... subscribers)</strong>:  Does the same as above(method 12) but asynchronously.</li>
<li>
<strong>addSubscriber(T subscriber)</strong>: This method add subscribers to default global channel channels.</li>
<li>
<strong>void addSubscriber(Integer channelId, T subscriber)</strong>: This method add subscribers to public channels with subscriber having subscriber.hashCode() as the subscriber id.</li>
<li>
<strong>addSubscriberAsync(Integer channelId, T subscriber)</strong>: Does the same as above(method 15) but asynchronously.</li>
<li>
<strong>addSubscriber(Integer channelId, T subscriber, Integer subscriberId)</strong>: This method add subscribers to public channels with subscriber having subscriberId as the subscriber id.</li>
<li>
<strong>addSubscriberAsync(Integer channelId, T subscriber, Integer subscriberId)</strong>: Does the same as above(method 17) but asynchronously.</li>
<li>
<strong>addSubscriber(V owner, Integer channelId, T subscriber)</strong>: This method add subscribers to private channels. Only owner of the channel can add subscribers to this channel. The subscriber is given subscriber.hashCode() as the subscriber id.</li>
<li>
<strong>addSubscriberAsync(V owner, Integer channelId, T subscriber)</strong>: Does the same as above(method 19) but asynchronously.</li>
<li>
<strong>addSubscriber(V owner, Integer channelId, T subscriber, Integer subscriberId)</strong>: This method add subscribers to private channels. Only owner of the channel can add subscribers to this channel. The subscriber is given subscriberId as the subscriber id.</li>
<li>
<strong>addSubscriberAsync(V owner, Integer channelId, T subscriber, Integer subscriberId)</strong>: Does the same as above(method 21) but asynchronously.</li>
<li>
<strong>removeSubscriber(T subscriber)</strong>: Removes subscriber form the default global channel.</li>
<li>
<strong>removeSubscriber(Integer channelId, T subscriber)</strong>: Removes subscriber form a public channel.</li>
<li>
<strong>removeSubscriber(T registeredSubscriber, Integer channelId, Integer subscriberId)</strong>: Removes subscriber form a private channel. Only registered subscribers of the private channel can remove a subscriber.</li>
<li>
<strong>getAllSubscribersWeakRef()</strong>: returns a collection of weakreference holding the subscriber. </li>
</ol>

<hr>

<h1>
<a id="receiving-messages" class="anchor" href="#receiving-messages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Receiving Messages</h1>

<h3>
<a id="the-messages-are-received-via-onmessage-method-annotation-the-class-subscribing-any-message-has-to-create-a-method-with-message-object-as-the-parameter-and-annotate-it-with-onmessage" class="anchor" href="#the-messages-are-received-via-onmessage-method-annotation-the-class-subscribing-any-message-has-to-create-a-method-with-message-object-as-the-parameter-and-annotate-it-with-onmessage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The messages are received via OnMessage method annotation. The class subscribing any message has to create a method with message object as the parameter and annotate it with @OnMessage.</h3>

<h3>
<a id="onmessage-parameters" class="anchor" href="#onmessage-parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>@OnMessage Parameters</h3>

<ol>
<li>
<strong>channelId</strong>: This parameter in the annotation, attaches the message reception to a particular channel on which the class has subscribed. If not provided will be listening to the default global channel.</li>
<li>
<strong>isCommonReceiver</strong>: This parameter sets the message reception from any channel on which the class has subscribed.</li>
</ol>

<h2>
<a id="example-1-sending-and-receiving-messages-over-default-global-channel" class="anchor" href="#example-1-sending-and-receiving-messages-over-default-global-channel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 1: Sending and receiving messages over default global channel</h2>

<h3>
<a id="step-1-create-a-message-class-that-will-be-passed-on-the-channel-for-broadcasting" class="anchor" href="#step-1-create-a-message-class-that-will-be-passed-on-the-channel-for-broadcasting" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 1: Create a message class that will be passed on the channel for broadcasting.</h3>

<div class="highlight highlight-source-java"><pre>   <span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Message1</span> {

     <span class="pl-k">private</span> <span class="pl-smi">String</span> msg;

     <span class="pl-k">public</span> <span class="pl-en">Message1</span>(<span class="pl-smi">String</span> <span class="pl-v">msg</span>) {
          <span class="pl-v">this</span><span class="pl-k">.</span>msg <span class="pl-k">=</span> msg;
     }

     <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">getMsg</span>() {
         <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>Message1: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> msg;
     }

     <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setMsg</span>(<span class="pl-smi">String</span> <span class="pl-v">msg</span>) {
          <span class="pl-v">this</span><span class="pl-k">.</span>msg <span class="pl-k">=</span> msg;
      }
   }</pre></div>

<h3>
<a id="step-2-subscribe-the-class-to-the-default-global-channel" class="anchor" href="#step-2-subscribe-the-class-to-the-default-global-channel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 2: Subscribe the class to the default global channel</h3>

<h3>
<a id="step-3-attach-the-message-to-a-recipient-class" class="anchor" href="#step-3-attach-the-message-to-a-recipient-class" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 3: Attach the message to a recipient class</h3>

<div class="highlight highlight-source-java"><pre>    <span class="pl-k">public</span> SubscriberA() {
        <span class="pl-k">try</span> {
            <span class="pl-smi">JPost</span><span class="pl-k">.</span>getBroadcastCenter()<span class="pl-k">.</span>addSubscriber(<span class="pl-v">this</span>);
        }<span class="pl-k">catch</span> (<span class="pl-smi">AlreadyExistsException</span> e){
            e<span class="pl-k">.</span>printStackTrace();
        }<span class="pl-k">catch</span> (<span class="pl-smi">NullObjectException</span> e){
            e<span class="pl-k">.</span>printStackTrace();
        }

        <span class="pl-k">try</span> {
            <span class="pl-smi">JPost</span><span class="pl-k">.</span>getBroadcastCenter()<span class="pl-k">.</span>addSubscriber(<span class="pl-smi">ChannelIds</span><span class="pl-k">.</span>publicChannel1, <span class="pl-v">this</span>);
        }<span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> e){
            e<span class="pl-k">.</span>printStackTrace();
        }
    }

    <span class="pl-k">@OnMessage</span>
    <span class="pl-k">private</span> <span class="pl-k">void</span> onMessage1(<span class="pl-smi">Message1</span> msg){
        <span class="pl-smi">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(<span class="pl-s"><span class="pl-pds">"</span>SubscriberA: <span class="pl-pds">"</span></span><span class="pl-k">+</span> msg<span class="pl-k">.</span>getMsg());
    }</pre></div>

<h3>
<a id="step-4-send-the-message-to-the-class" class="anchor" href="#step-4-send-the-message-to-the-class" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 4: Send the message to the class</h3>

<div class="highlight highlight-source-java"><pre>   <span class="pl-c">//TO SEND THROUGH THE CLASS RUNNING THREAD USER</span>
   <span class="pl-smi">JPost</span><span class="pl-k">.</span>getBroadcastCenter()<span class="pl-k">.</span>broadcast(<span class="pl-k">new</span> <span class="pl-smi">Message1</span>(<span class="pl-s"><span class="pl-pds">"</span>Application sending message<span class="pl-pds">"</span></span>));

   <span class="pl-c">// TO SEND ASYNCHRONOUSLY</span>
   <span class="pl-k">try</span> {
        <span class="pl-smi">JPost</span><span class="pl-k">.</span>getBroadcastCenter()<span class="pl-k">.</span>broadcastAsync(<span class="pl-k">new</span> <span class="pl-smi">Message2</span>(<span class="pl-s"><span class="pl-pds">"</span>Application sending message<span class="pl-pds">"</span></span>));
    }<span class="pl-k">catch</span> (<span class="pl-smi">JPostNotRunningException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }</pre></div>

<h2>
<a id="example-2-creating-public-channel-and-sending-and-receiving-messages-over-it" class="anchor" href="#example-2-creating-public-channel-and-sending-and-receiving-messages-over-it" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 2: Creating public channel and sending and receiving messages over it</h2>

<h3>
<a id="step-1-create-message-class-this-is-same-as-above-expamle-1" class="anchor" href="#step-1-create-message-class-this-is-same-as-above-expamle-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 1: Create Message class. This is same as above expamle 1.</h3>

<h3>
<a id="step-2-create-a-public-channel-and-give-it-a-unique-id" class="anchor" href="#step-2-create-a-public-channel-and-give-it-a-unique-id" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 2: Create a public channel and give it a unique id.</h3>

<div class="highlight highlight-source-java"><pre>    <span class="pl-k">class</span> <span class="pl-en">ChannelIds</span>{
        <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-k">int</span> publicChannel1 <span class="pl-k">=</span> <span class="pl-c1">1</span>;
    }

    <span class="pl-c1">.....</span>
    <span class="pl-k">try</span> {
        <span class="pl-smi">JPost</span><span class="pl-k">.</span>getBroadcastCenter()<span class="pl-k">.</span>createPublicChannel(<span class="pl-smi">ChannelIds</span><span class="pl-k">.</span>publicChannel1);
    }<span class="pl-k">catch</span> (<span class="pl-smi">AlreadyExistsException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }</pre></div>

<h3>
<a id="step-3-subscribe-and-attach-a-message-recipient-to-a-class" class="anchor" href="#step-3-subscribe-and-attach-a-message-recipient-to-a-class" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 3: Subscribe and attach a message recipient to a class</h3>

<div class="highlight highlight-source-java"><pre>     <span class="pl-k">public</span> SubscriberA() {
        <span class="pl-k">try</span> {
            <span class="pl-smi">JPost</span><span class="pl-k">.</span>getBroadcastCenter()<span class="pl-k">.</span>addSubscriber(<span class="pl-smi">ChannelIds</span><span class="pl-k">.</span>publicChannel1, <span class="pl-v">this</span>);

            <span class="pl-c">// TO ADD SUBSCRIBER ASYNCHRONOUSLY </span>
            <span class="pl-c">// JPost.getBroadcastCenter().addSubscriberAsync(ChannelIds.publicChannel1, this);</span>
        }<span class="pl-k">catch</span> (<span class="pl-smi">PermissionException</span> e){
            e<span class="pl-k">.</span>printStackTrace();
        }<span class="pl-k">catch</span> (<span class="pl-smi">NoSuchChannelException</span> e){
            e<span class="pl-k">.</span>printStackTrace();
        }<span class="pl-k">catch</span> (<span class="pl-smi">AlreadyExistsException</span> e){
            e<span class="pl-k">.</span>printStackTrace();
        }<span class="pl-k">catch</span> (<span class="pl-smi">IllegalChannelStateException</span> e){
            e<span class="pl-k">.</span>printStackTrace();
        }<span class="pl-k">catch</span> (<span class="pl-smi">NullObjectException</span> e){
            e<span class="pl-k">.</span>printStackTrace();
        }
    }

    <span class="pl-k">@OnMessage</span>(<span class="pl-c1">channelId</span> <span class="pl-k">=</span> <span class="pl-smi">ChannelIds</span><span class="pl-k">.</span>publicChannel1)
    <span class="pl-k">private</span> <span class="pl-k">void</span> onMessage1(<span class="pl-smi">Message1</span> msg){
        <span class="pl-smi">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(<span class="pl-s"><span class="pl-pds">"</span>SubscriberA: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> msg<span class="pl-k">.</span>getMsg());
    }</pre></div>

<h3>
<a id="step-4-send-message-via-public-channel" class="anchor" href="#step-4-send-message-via-public-channel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 4: Send Message via public channel</h3>

<div class="highlight highlight-source-java"><pre>    <span class="pl-c">//TO SEND THROUGH THE CLASS RUNNING THREAD USER</span>
    <span class="pl-smi">JPost</span><span class="pl-k">.</span>getBroadcastCenter()<span class="pl-k">.</span>broadcast(<span class="pl-smi">ChannelIds</span><span class="pl-k">.</span>publicChannel1, <span class="pl-k">new</span> <span class="pl-smi">Message1</span>(<span class="pl-s"><span class="pl-pds">"</span>Application sending public message<span class="pl-pds">"</span></span>));

    <span class="pl-c">// TO SEND ASYNCHRONOUSLY</span>
    <span class="pl-k">try</span> {
        <span class="pl-smi">JPost</span><span class="pl-k">.</span>getBroadcastCenter()<span class="pl-k">.</span>broadcastAsync(<span class="pl-smi">ChannelIds</span><span class="pl-k">.</span>publicChannel1, <span class="pl-k">new</span> <span class="pl-smi">Message1</span>(<span class="pl-s"><span class="pl-pds">"</span>Application sending public async message<span class="pl-pds">"</span></span>));
    }<span class="pl-k">catch</span> (<span class="pl-smi">JPostNotRunningException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }</pre></div>

<h2>
<a id="example-3-creating-private-channel-adding-subscribersonly-creatorowner-of-the-channel-has-adding-subscribers-right-and-sending-and-receiving-messages-over-it" class="anchor" href="#example-3-creating-private-channel-adding-subscribersonly-creatorowner-of-the-channel-has-adding-subscribers-right-and-sending-and-receiving-messages-over-it" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 3: Creating private channel, adding subscribers(Only creator/owner of the channel has adding subscribers right) and sending and receiving messages over it</h2>

<div class="highlight highlight-source-java"><pre>    <span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">ChannelIds</span> {
        <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-k">int</span> publicChannel1 <span class="pl-k">=</span> <span class="pl-c1">1</span>;
        <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-k">int</span> privateChannel1 <span class="pl-k">=</span> <span class="pl-c1">2</span>;
    }

    <span class="pl-c">// CREATING PRIVATE CHANNEL</span>
    <span class="pl-k">try</span> {
        <span class="pl-smi">JPost</span><span class="pl-k">.</span>getBroadcastCenter()<span class="pl-k">.</span>createPrivateChannel(<span class="pl-v">this</span>, <span class="pl-smi">ChannelIds</span><span class="pl-k">.</span>privateChannel1);
    }<span class="pl-k">catch</span> (<span class="pl-smi">AlreadyExistsException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }

    <span class="pl-c">// ADDING </span>
    <span class="pl-k">try</span> {
        <span class="pl-smi">JPost</span><span class="pl-k">.</span>getBroadcastCenter()<span class="pl-k">.</span>addSubscriber(<span class="pl-v">this</span>, <span class="pl-smi">ChannelIds</span><span class="pl-k">.</span>privateChannel1, subscriberA);
    }<span class="pl-k">catch</span> (<span class="pl-smi">AlreadyExistsException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }<span class="pl-k">catch</span> (<span class="pl-smi">NullObjectException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }<span class="pl-k">catch</span> (<span class="pl-smi">NoSuchChannelException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }<span class="pl-k">catch</span> (<span class="pl-smi">PermissionException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }<span class="pl-k">catch</span> (<span class="pl-smi">IllegalChannelStateException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }

    <span class="pl-c">// SUBSCRIBING PRIVATE MESSAGES</span>
    <span class="pl-k">@OnMessage</span>(<span class="pl-c1">channelId</span> <span class="pl-k">=</span> <span class="pl-smi">ChannelIds</span><span class="pl-k">.</span>privateChannel1)
    <span class="pl-k">private</span> <span class="pl-k">void</span> onMessage1(<span class="pl-smi">Message1</span> msg){
        <span class="pl-smi">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(<span class="pl-s"><span class="pl-pds">"</span>SubscriberD: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> msg<span class="pl-k">.</span>getMsg());
    }
</pre></div>

<h1>
<a id="interesting-usage" class="anchor" href="#interesting-usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Interesting Usage</h1>

<h3>
<a id="1-the-subscribers-are-added-with-unique-ids-if-id-is-not-provided-then-its-hashcode-is-taken-as-the-id" class="anchor" href="#1-the-subscribers-are-added-with-unique-ids-if-id-is-not-provided-then-its-hashcode-is-taken-as-the-id" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1. The subscribers are added with unique ids. If id is not provided then its hashcode is taken as the id.</h3>

<div class="highlight highlight-source-java"><pre>    <span class="pl-k">int</span> subscriberId <span class="pl-k">=</span> <span class="pl-c1">1</span>;
    <span class="pl-k">try</span> {
        <span class="pl-smi">JPost</span><span class="pl-k">.</span>getBroadcastCenter()<span class="pl-k">.</span>addSubscriber(<span class="pl-smi">ChannelIds</span><span class="pl-k">.</span>publicChannel1, <span class="pl-v">this</span>, subscriberId);
    }<span class="pl-k">catch</span> (<span class="pl-smi">PermissionException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }<span class="pl-k">catch</span> (<span class="pl-smi">NoSuchChannelException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }<span class="pl-k">catch</span> (<span class="pl-smi">AlreadyExistsException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }<span class="pl-k">catch</span> (<span class="pl-smi">IllegalChannelStateException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }<span class="pl-k">catch</span> (<span class="pl-smi">NullObjectException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }</pre></div>

<h3>
<a id="2-the-message-can-also-be-send-to-select-subscribers-on-the-channel" class="anchor" href="#2-the-message-can-also-be-send-to-select-subscribers-on-the-channel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2. The message can also be send to select subscribers on the channel</h3>

<div class="highlight highlight-source-java"><pre>    <span class="pl-k">int</span> subscriberId1 <span class="pl-k">=</span> <span class="pl-c1">1</span>;
    <span class="pl-k">int</span> subscriberId2 <span class="pl-k">=</span> <span class="pl-c1">2</span>;
    <span class="pl-k">try</span> {
        <span class="pl-smi">JPost</span><span class="pl-k">.</span>getBroadcastCenter()<span class="pl-k">.</span>broadcastAsync(<span class="pl-smi">ChannelIds</span><span class="pl-k">.</span>publicChannel1, 
                <span class="pl-k">new</span> <span class="pl-smi">Message1</span>(<span class="pl-s"><span class="pl-pds">"</span>Application sending public message<span class="pl-pds">"</span></span>), subscriberId1, subscriberId2);
    }<span class="pl-k">catch</span> (<span class="pl-smi">JPostNotRunningException</span> e){
        e<span class="pl-k">.</span>printStackTrace();
    }</pre></div>

<h1>
<a id="android-note" class="anchor" href="#android-note" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Android Note:</h1>

<h3>
<a id="if-the-ui-has-to-be-updated-with-the-message-then-attach-a-runnable" class="anchor" href="#if-the-ui-has-to-be-updated-with-the-message-then-attach-a-runnable" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>If the UI has to be updated with the message then attach a runnable</h3>

<div class="highlight highlight-source-java"><pre>  <span class="pl-k">@OnMessage</span>
    <span class="pl-k">private</span> <span class="pl-k">void</span> onMessage(<span class="pl-k">final</span> <span class="pl-smi">Message</span> msg){
        <span class="pl-v">this</span><span class="pl-k">.</span>runOnUiThread(<span class="pl-k">new</span> <span class="pl-smi">Runnable</span>() {
            <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">run</span>() {
                textView<span class="pl-k">.</span>setText(msg<span class="pl-k">.</span>getMsg());
            }
        });
    }</pre></div>

<h1>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h1>

<pre><code>   Copyright (C) 2016 Janishar Ali Anwar

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License

</code></pre>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/janishar/JPost">JPost</a> is maintained by <a href="https://github.com/janishar">janishar</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
